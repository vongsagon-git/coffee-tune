<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="TUNER">
  <meta name="theme-color" content="#43302b">
  <meta name="mobile-web-app-capable" content="yes">
  <link rel="manifest" href="manifest.json">
  <link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 192 192'><rect width='192' height='192' rx='40' fill='%2343302b'/><text x='96' y='130' text-anchor='middle' font-size='100'>‚òï</text></svg>">
  <title>WANWAN COFFEE TUNER</title>
  <script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            coffee: {
              50: '#fdf8f6',
              100: '#f2e8e5',
              200: '#eaddd7',
              300: '#e0cec7',
              400: '#d2bab0',
              500: '#bfa094',
              600: '#a18072',
              700: '#977669',
              800: '#846358',
              900: '#43302b',
            }
          }
        }
      }
    }
  </script>
  <style>
    [v-cloak] { display: none; }

    /* Native app feel */
    * {
      -webkit-tap-highlight-color: transparent;
      -webkit-touch-callout: none;
      -webkit-user-select: none;
      user-select: none;
    }
    input, textarea {
      -webkit-user-select: text;
      user-select: text;
    }

    /* Safe area for notch devices */
    body {
      padding-top: env(safe-area-inset-top);
      padding-bottom: env(safe-area-inset-bottom);
    }

    /* Hide scrollbar but allow scroll */
    ::-webkit-scrollbar { display: none; }
    html { scrollbar-width: none; }

    /* Input styling */
    input[type="number"]::-webkit-inner-spin-button,
    input[type="number"]::-webkit-outer-spin-button {
      -webkit-appearance: none;
      margin: 0;
    }
    input[type="number"] { -moz-appearance: textfield; }

    /* Animations */
    .page-enter { animation: slideIn 0.25s ease-out; }
    @keyframes slideIn {
      from { opacity: 0; transform: translateX(20px); }
      to { opacity: 1; transform: translateX(0); }
    }

    /* Active states for buttons */
    button:active { transform: scale(0.97); }

    /* Smooth transitions */
    * { transition: background-color 0.15s, transform 0.15s; }
  </style>
</head>
<body class="bg-coffee-50 min-h-screen">
  <div id="app" v-cloak>
    <!-- Header -->
    <header class="bg-gradient-to-r from-coffee-900 via-coffee-800 to-coffee-900 text-white py-3 px-4 sticky top-0 z-50 shadow-lg">
      <div class="max-w-md mx-auto flex items-center justify-between">
        <div>
          <h1 class="text-lg font-bold">üêï WANWAN COFFEE</h1>
          <p class="text-coffee-400 text-xs">Coffee Tuner</p>
        </div>
        <div class="text-right text-xs text-coffee-400">
          <p>Appia Life XT 2GR</p>
          <p>F64 Evo Pro GBW</p>
        </div>
      </div>
    </header>

    <main class="max-w-md mx-auto px-4 py-6">
      <!-- ==================== PAGE 1: INPUT ==================== -->
      <div v-if="page === 'input'" class="page-enter space-y-6">
        <div class="text-center">
          <span class="text-4xl">‚òï</span>
          <h2 class="text-xl font-bold text-coffee-800 mt-2">Shot #{{ shotNumber }}</h2>
          <p class="text-sm text-coffee-500">‡∏Å‡∏£‡∏≠‡∏Å‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏ß‡∏±‡∏î‡πÑ‡∏î‡πâ</p>
        </div>

        <!-- Input Grid -->
        <div class="bg-white rounded-2xl shadow-lg p-5 space-y-4">
          <!-- Row 1: Grind + Dose -->
          <div class="grid grid-cols-2 gap-4">
            <div>
              <label class="block text-sm font-medium text-coffee-700 mb-2">‡πÄ‡∏ö‡∏≠‡∏£‡πå‡∏ö‡∏î</label>
              <input type="number" v-model.number="shot.grind" step="0.1" min="1" max="12"
                class="w-full h-14 text-2xl font-bold text-center border-2 border-coffee-200 rounded-xl focus:border-coffee-600 focus:outline-none">
            </div>
            <div>
              <div class="flex items-center justify-between mb-2">
                <label class="text-sm font-medium text-coffee-700">Dose (g)</label>
                <label class="flex items-center gap-1 text-xs text-coffee-500 cursor-pointer">
                  <input type="checkbox" v-model="fixedDose" class="w-3 h-3 accent-coffee-600">
                  Fixed
                </label>
              </div>
              <input type="number" v-model.number="shot.dose" step="0.1"
                class="w-full h-14 text-2xl font-bold text-center border-2 rounded-xl focus:outline-none"
                :class="fixedDose ? 'border-coffee-400 bg-coffee-50' : 'border-coffee-200'">
            </div>
          </div>

          <!-- Row 2: Yield + Time -->
          <div class="grid grid-cols-2 gap-4">
            <div>
              <div class="flex items-center justify-between mb-2">
                <label class="text-sm font-medium text-coffee-700">Yield (g)</label>
                <span v-if="shot.dose && shot.yield" class="text-xs text-coffee-500">= 1:{{ (shot.yield / shot.dose).toFixed(1) }}</span>
              </div>
              <input type="number" v-model.number="shot.yield" step="0.1"
                class="w-full h-14 text-2xl font-bold text-center border-2 border-coffee-200 rounded-xl focus:border-coffee-600 focus:outline-none">
            </div>
            <div>
              <label class="block text-sm font-medium text-coffee-700 mb-2">Time (s)</label>
              <input type="number" v-model.number="shot.time"
                class="w-full h-14 text-2xl font-bold text-center border-2 border-coffee-200 rounded-xl focus:border-coffee-600 focus:outline-none">
            </div>
          </div>

          <!-- Row 3: TDS + Brix -->
          <div class="grid grid-cols-2 gap-4">
            <div>
              <label class="block text-sm font-medium text-coffee-700 mb-2">TDS %</label>
              <input type="number" v-model.number="shot.tds" step="0.1"
                class="w-full h-14 text-2xl font-bold text-center border-2 border-coffee-200 rounded-xl focus:border-coffee-600 focus:outline-none">
            </div>
            <div>
              <label class="block text-sm font-medium text-coffee-700 mb-2">Brix %</label>
              <input type="number" v-model.number="shot.brix" step="0.1"
                class="w-full h-14 text-2xl font-bold text-center border-2 border-coffee-200 rounded-xl focus:border-coffee-600 focus:outline-none">
            </div>
          </div>
        </div>

        <!-- Submit Button -->
        <button
          @click="analyze"
          :disabled="!canAnalyze"
          class="w-full h-16 rounded-2xl font-bold text-xl transition-all"
          :class="canAnalyze
            ? 'bg-coffee-700 text-white hover:bg-coffee-800 active:scale-98'
            : 'bg-coffee-200 text-coffee-400'"
        >
          ‡∏î‡∏π‡∏ú‡∏• ‚Üí
        </button>
      </div>

      <!-- ==================== PAGE 2: RESULT ==================== -->
      <div v-if="page === 'result'" class="page-enter space-y-5">

        <!-- Extraction Chart -->
        <div class="bg-white rounded-2xl shadow-lg p-4">
          <p class="text-xs text-coffee-500 text-center mb-2">Extraction Chart</p>
          <svg viewBox="0 0 200 150" class="w-full h-40">
            <!-- Background zones -->
            <!-- Under (left) -->
            <rect x="10" y="10" width="60" height="130" fill="#fef3c7" rx="4"/>
            <!-- Over (right) -->
            <rect x="130" y="10" width="60" height="130" fill="#fee2e2" rx="4"/>
            <!-- Perfect zone (center) -->
            <rect x="70" y="40" width="60" height="70" fill="#dcfce7" rx="4" stroke="#22c55e" stroke-width="2"/>

            <!-- Zone labels -->
            <text x="40" y="80" text-anchor="middle" class="text-[8px] fill-amber-600">Under</text>
            <text x="40" y="92" text-anchor="middle" class="text-[7px] fill-amber-500">‡∏™‡∏Å‡∏±‡∏î‡∏ô‡πâ‡∏≠‡∏¢</text>
            <text x="100" y="78" text-anchor="middle" class="text-[8px] fill-green-600">Perfect</text>
            <text x="100" y="90" text-anchor="middle" class="text-[7px] fill-green-500">18-22%</text>
            <text x="160" y="80" text-anchor="middle" class="text-[8px] fill-red-600">Over</text>
            <text x="160" y="92" text-anchor="middle" class="text-[7px] fill-red-500">‡∏™‡∏Å‡∏±‡∏î‡∏°‡∏≤‡∏Å</text>

            <!-- Axis labels -->
            <text x="100" y="148" text-anchor="middle" class="text-[8px] fill-coffee-500">EY% ‚Üí</text>
            <text x="5" y="75" text-anchor="middle" class="text-[8px] fill-coffee-500" transform="rotate(-90, 5, 75)">TDS% ‚Üí</text>

            <!-- Current position dot -->
            <circle :cx="chartX" :cy="chartY" r="8" :fill="isPerfect ? '#22c55e' : '#f59e0b'" stroke="white" stroke-width="2"/>
            <text :x="chartX" :y="chartY + 3" text-anchor="middle" class="text-[6px] fill-white font-bold">‚óè</text>

            <!-- Arrow to perfect zone (if not perfect) -->
            <line v-if="!isPerfect && shot.tds"
              :x1="chartX" :y1="chartY"
              :x2="100" :y2="75"
              stroke="#22c55e" stroke-width="2" stroke-dasharray="4" marker-end="url(#arrow)"/>

            <defs>
              <marker id="arrow" markerWidth="6" markerHeight="6" refX="5" refY="3" orient="auto">
                <path d="M0,0 L6,3 L0,6 Z" fill="#22c55e"/>
              </marker>
            </defs>
          </svg>
        </div>

        <!-- Flavor Profile -->
        <div class="bg-white rounded-2xl shadow-lg p-4">
          <p class="text-xs text-coffee-500 text-center mb-3">‡∏£‡∏™‡∏ä‡∏≤‡∏ï‡∏¥‡∏ó‡∏µ‡πà‡∏Ñ‡∏≤‡∏î‡∏ß‡πà‡∏≤‡∏à‡∏∞‡πÑ‡∏î‡πâ</p>
          <div class="flex flex-wrap justify-center gap-2">
            <span v-for="flavor in expectedFlavors" :key="flavor.name"
              class="px-3 py-1 rounded-full text-sm font-medium"
              :class="flavor.type === 'good' ? 'bg-green-100 text-green-700' :
                      flavor.type === 'bad' ? 'bg-red-100 text-red-700' :
                      'bg-amber-100 text-amber-700'">
              {{ flavor.icon }} {{ flavor.name }}
            </span>
          </div>
        </div>

        <!-- Stats Card (compact) -->
        <div class="bg-white rounded-2xl shadow-lg p-4">
          <div class="grid grid-cols-4 gap-2 text-center">
            <div class="p-2 bg-coffee-50 rounded-lg">
              <p class="text-[10px] text-coffee-500">Ratio</p>
              <p class="text-lg font-bold text-coffee-800">1:{{ ratio }}</p>
            </div>
            <div class="p-2 rounded-lg" :class="eyColor">
              <p class="text-[10px] opacity-80">EY%</p>
              <p class="text-lg font-bold">{{ ey || '-' }}</p>
            </div>
            <div class="p-2 bg-coffee-50 rounded-lg">
              <p class="text-[10px] text-coffee-500">Time</p>
              <p class="text-lg font-bold text-coffee-800">{{ shot.time }}s</p>
            </div>
            <div class="p-2 bg-coffee-50 rounded-lg">
              <p class="text-[10px] text-coffee-500">TDS</p>
              <p class="text-lg font-bold text-coffee-800">{{ shot.tds || '-' }}%</p>
            </div>
          </div>
        </div>

        <!-- Action Card (if not perfect) -->
        <div v-if="!isPerfect" class="bg-amber-50 border-2 border-amber-200 rounded-2xl p-4 text-center">
          <p class="text-xs text-amber-600 mb-1">Shot ‡∏ñ‡∏±‡∏î‡πÑ‡∏õ ‡πÉ‡∏´‡πâ‡∏õ‡∏£‡∏±‡∏ö:</p>
          <p class="text-2xl font-bold text-amber-800">{{ action.do }}</p>
          <p class="text-xs text-amber-600 mt-1">{{ action.reason }}</p>
        </div>

        <!-- Perfect Action -->
        <div v-else class="bg-green-50 border-2 border-green-200 rounded-2xl p-4 text-center">
          <p class="text-lg font-bold text-green-700">üéØ ‡∏à‡∏î Recipe ‡∏ô‡∏µ‡πâ‡πÑ‡∏ß‡πâ!</p>
          <p class="text-sm text-green-600 mt-1">‡πÄ‡∏ö‡∏≠‡∏£‡πå‡∏ö‡∏î {{ shot.grind }} | Dose {{ shot.dose }}g | Yield {{ shot.yield }}g</p>
        </div>

        <!-- Next Button -->
        <button
          @click="nextShot"
          class="w-full h-16 rounded-2xl font-bold text-xl bg-coffee-700 text-white hover:bg-coffee-800 active:scale-98 transition-all"
        >
          {{ isPerfect ? 'üéØ Shot ‡πÉ‡∏´‡∏°‡πà' : 'üîÑ ‡∏õ‡∏£‡∏±‡∏ö‡πÅ‡∏•‡πâ‡∏ß ‚Üí Shot ‡∏ï‡πà‡∏≠‡πÑ‡∏õ' }}
        </button>

        <!-- History Toggle -->
        <button
          v-if="history.length > 0"
          @click="showHistory = !showHistory"
          class="w-full text-center text-sm text-coffee-500 hover:text-coffee-700"
        >
          {{ showHistory ? '‚ñ≤ ‡∏ã‡πà‡∏≠‡∏ô History' : '‚ñº ‡∏î‡∏π History (' + history.length + ')' }}
        </button>

        <!-- History List -->
        <div v-if="showHistory && history.length > 0" class="bg-white rounded-2xl shadow p-4 space-y-2">
          <div v-for="(h, i) in reversedHistory" :key="h.id"
            class="flex items-center gap-3 p-2 bg-coffee-50 rounded-lg text-sm">
            <span class="text-xl">{{ h.isPerfect ? 'üéØ' : 'üîÑ' }}</span>
            <div class="flex-1">
              <p class="font-medium text-coffee-800">#{{ history.length - i }} | {{ h.grind }} | {{ h.time }}s</p>
              <p class="text-xs text-coffee-500">EY {{ h.ey || '-' }}% | TDS {{ h.tds || '-' }}%</p>
            </div>
          </div>
        </div>
      </div>
    </main>

    <!-- Footer -->
    <footer class="text-center py-4 text-xs text-coffee-400">
      üêï WANWAN COFFEE TUNER v4.0
    </footer>
  </div>

  <script>
    const { createApp, ref, computed, onMounted } = Vue

    createApp({
      setup() {
        // State
        const page = ref('input')
        const shotNumber = ref(1)
        const showHistory = ref(false)
        const fixedDose = ref(true) // Fixed dose by default

        const shot = ref({
          grind: null,
          dose: null,
          yield: null,
          time: null,
          tds: null,
          brix: null
        })

        const history = ref([])

        // Computed
        const canAnalyze = computed(() => {
          return shot.value.grind && shot.value.dose && shot.value.yield && shot.value.time && shot.value.tds && shot.value.brix
        })

        const ratio = computed(() => {
          if (!shot.value.dose || !shot.value.yield) return '-'
          return (shot.value.yield / shot.value.dose).toFixed(1)
        })

        const ey = computed(() => {
          if (!shot.value.dose || !shot.value.yield || !shot.value.tds) return null
          return ((shot.value.yield * shot.value.tds) / shot.value.dose).toFixed(1)
        })

        const eyVal = computed(() => ey.value ? parseFloat(ey.value) : null)

        const isPerfect = computed(() => {
          if (!shot.value.tds) {
            // No TDS: use time (20-35s is OK)
            return shot.value.time >= 20 && shot.value.time <= 35
          }
          // With TDS: check EY 18-22% and TDS 8-12%
          return eyVal.value >= 18 && eyVal.value <= 22 && shot.value.tds >= 8 && shot.value.tds <= 12
        })

        const direction = computed(() => {
          if (shot.value.tds && eyVal.value) {
            return eyVal.value < 18 ? 'under' : 'over'
          }
          return shot.value.time < 25 ? 'under' : 'over'
        })

        const eyColor = computed(() => {
          if (!eyVal.value) return 'bg-coffee-50 text-coffee-800'
          if (eyVal.value >= 18 && eyVal.value <= 22) return 'bg-green-100 text-green-700'
          return 'bg-amber-100 text-amber-700'
        })

        // Chart position (EY on X, TDS on Y)
        const chartX = computed(() => {
          if (!eyVal.value) {
            // No TDS: use time to estimate position
            const t = shot.value.time || 25
            if (t < 20) return 40 // Under zone
            if (t > 35) return 160 // Over zone
            return 100 // Perfect zone
          }
          // Map EY 14-26% to X 10-190
          const ey = Math.max(14, Math.min(26, eyVal.value))
          return 10 + ((ey - 14) / 12) * 180
        })

        const chartY = computed(() => {
          if (!shot.value.tds) return 75 // Center Y if no TDS
          // Map TDS 6-14% to Y 130-10
          const tds = Math.max(6, Math.min(14, shot.value.tds))
          return 130 - ((tds - 6) / 8) * 120
        })

        // Expected flavors based on extraction
        const expectedFlavors = computed(() => {
          const flavors = []
          const eyv = eyVal.value
          const tds = shot.value.tds
          const t = shot.value.time

          if (eyv) {
            if (eyv < 18) {
              flavors.push({ icon: 'üçã', name: '‡πÄ‡∏õ‡∏£‡∏µ‡πâ‡∏¢‡∏ß', type: 'bad' })
              flavors.push({ icon: 'üíß', name: '‡∏à‡∏∑‡∏î', type: 'bad' })
              flavors.push({ icon: 'üåø', name: '‡πÄ‡∏ù‡∏∑‡πà‡∏≠‡∏ô', type: 'bad' })
            } else if (eyv > 22) {
              flavors.push({ icon: '‚òï', name: '‡∏Ç‡∏°', type: 'bad' })
              flavors.push({ icon: 'üî•', name: '‡πÑ‡∏´‡∏°‡πâ', type: 'bad' })
              flavors.push({ icon: 'üòñ', name: '‡∏ù‡∏≤‡∏î', type: 'bad' })
            } else {
              flavors.push({ icon: 'üçØ', name: '‡∏´‡∏ß‡∏≤‡∏ô', type: 'good' })
              flavors.push({ icon: '‚öñÔ∏è', name: '‡∏™‡∏°‡∏î‡∏∏‡∏•', type: 'good' })
            }
          } else {
            // No TDS - use time
            if (t < 20) {
              flavors.push({ icon: 'üçã', name: '‡πÄ‡∏õ‡∏£‡∏µ‡πâ‡∏¢‡∏ß', type: 'bad' })
              flavors.push({ icon: 'üíß', name: '‡∏ö‡∏≤‡∏á', type: 'bad' })
            } else if (t > 35) {
              flavors.push({ icon: '‚òï', name: '‡∏Ç‡∏°', type: 'bad' })
              flavors.push({ icon: 'üî•', name: '‡πÄ‡∏ú‡πá‡∏î', type: 'bad' })
            } else {
              flavors.push({ icon: '‚ú®', name: '‡∏ô‡πà‡∏≤‡∏à‡∏∞‡∏î‡∏µ', type: 'good' })
            }
          }

          if (tds) {
            if (tds > 12) {
              flavors.push({ icon: 'üí™', name: '‡πÄ‡∏Ç‡πâ‡∏°‡∏°‡∏≤‡∏Å', type: 'warn' })
            } else if (tds < 8) {
              flavors.push({ icon: 'üíß', name: '‡πÄ‡∏ö‡∏≤‡∏ö‡∏≤‡∏á', type: 'warn' })
            } else {
              flavors.push({ icon: 'üëå', name: '‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Ç‡πâ‡∏°‡∏î‡∏µ', type: 'good' })
            }
          }

          return flavors
        })

        const action = computed(() => {
          const g = shot.value.grind
          const t = shot.value.time
          const tds = shot.value.tds
          const eyv = eyVal.value

          // Priority 1: EY via Grind (if have TDS)
          if (tds && eyv) {
            if (eyv < 18) {
              const newGrind = Math.max(1.0, g - 0.3).toFixed(1)
              return { do: `‡πÄ‡∏ö‡∏≠‡∏£‡πå‡∏ö‡∏î ${g} ‚Üí ${newGrind}`, reason: `EY ${eyv}% ‡∏ï‡πà‡∏≥` }
            }
            if (eyv > 22) {
              const newGrind = Math.min(12.0, parseFloat(g) + 0.3).toFixed(1)
              return { do: `‡πÄ‡∏ö‡∏≠‡∏£‡πå‡∏ö‡∏î ${g} ‚Üí ${newGrind}`, reason: `EY ${eyv}% ‡∏™‡∏π‡∏á` }
            }
            // EY OK, check TDS
            if (tds > 12) {
              const newYield = Math.round(shot.value.yield + 4)
              return { do: `Yield ${shot.value.yield}g ‚Üí ${newYield}g`, reason: `TDS ${tds}% ‡πÄ‡∏Ç‡πâ‡∏°‡πÄ‡∏Å‡∏¥‡∏ô` }
            }
            if (tds < 8) {
              const newYield = Math.round(shot.value.yield - 4)
              return { do: `Yield ${shot.value.yield}g ‚Üí ${newYield}g`, reason: `TDS ${tds}% ‡∏à‡∏∑‡∏î` }
            }
          }

          // No TDS - use Time
          if (t < 20) {
            const newGrind = Math.max(1.0, g - 0.3).toFixed(1)
            return { do: `‡πÄ‡∏ö‡∏≠‡∏£‡πå‡∏ö‡∏î ${g} ‚Üí ${newGrind}`, reason: `Time ${t}s ‡πÄ‡∏£‡πá‡∏ß‡πÑ‡∏õ` }
          }
          if (t > 35) {
            const newGrind = Math.min(12.0, parseFloat(g) + 0.3).toFixed(1)
            return { do: `‡πÄ‡∏ö‡∏≠‡∏£‡πå‡∏ö‡∏î ${g} ‚Üí ${newGrind}`, reason: `Time ${t}s ‡∏ä‡πâ‡∏≤‡πÑ‡∏õ` }
          }

          return { do: '‡∏•‡∏≠‡∏á‡∏ä‡∏¥‡∏°‡∏î‡∏π', reason: 'Time ‡∏û‡∏≠‡∏î‡∏µ‡πÅ‡∏•‡πâ‡∏ß' }
        })

        const reversedHistory = computed(() => [...history.value].reverse())

        // Methods
        function analyze() {
          page.value = 'result'
        }

        function nextShot() {
          // Save to history
          history.value.push({
            id: Date.now().toString(),
            grind: shot.value.grind,
            dose: shot.value.dose,
            yield: shot.value.yield,
            time: shot.value.time,
            tds: shot.value.tds,
            brix: shot.value.brix,
            ratio: ratio.value,
            ey: ey.value,
            isPerfect: isPerfect.value
          })
          localStorage.setItem('wanwan_history', JSON.stringify(history.value))

          // Keep grind & dose for next shot
          const lastGrind = shot.value.grind
          const lastDose = shot.value.dose

          // Reset
          shot.value = {
            grind: lastGrind,
            dose: lastDose,
            yield: null,
            time: null,
            tds: null,
            brix: null
          }

          shotNumber.value++
          showHistory.value = false
          page.value = 'input'
        }

        // Load history
        onMounted(() => {
          const saved = localStorage.getItem('wanwan_history')
          if (saved) {
            history.value = JSON.parse(saved)
            shotNumber.value = history.value.length + 1
          }
        })

        return {
          page,
          shotNumber,
          showHistory,
          fixedDose,
          shot,
          history,
          canAnalyze,
          ratio,
          ey,
          isPerfect,
          direction,
          eyColor,
          chartX,
          chartY,
          expectedFlavors,
          action,
          reversedHistory,
          analyze,
          nextShot
        }
      }
    }).mount('#app')

    // Register Service Worker for PWA
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('sw.js')
          .then(reg => console.log('SW registered'))
          .catch(err => console.log('SW registration failed:', err));
      });
    }
  </script>
</body>
</html>
